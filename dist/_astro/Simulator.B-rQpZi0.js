import{s as D,a as h,b as w,c as W}from"./_alias_.c22ecc25.v4HEXHm1.js";import{d as Y,A as B,y as E}from"./hooks.module.GKk-XFP7.js";import{u as e,n as I,l as x,m as F,P as L}from"./PortfolioCard.CI0gTddE.js";import{k as A}from"./preact.module.HqusRkxx.js";import"./index.660ff7df.BHrK1eR6.js";const $=({amount:t,onUp:s,onDn:N,onChange:r})=>{const[n,o]=Y(!1),c=B(null);E(()=>{n&&c.current&&c.current.focus()},[n]);const v=()=>{o(!0)},i=()=>{o(!1)},f=m=>{m.key==="Enter"&&o(!1)},d=m=>{const u=parseInt(m.target.value,10);!isNaN(u)&&r&&r(u)};return e("div",{className:D.numberWrapper,children:[e("button",{className:`${D.arrow} ${D.up}`,onClick:s,children:"▲"}),n?e("input",{ref:c,type:"number",className:D.amountInput,value:t,onChange:d,onBlur:i,onKeyDown:f}):e("span",{className:D.amount,onClick:v,style:{cursor:"pointer"},children:I(t)}),e("button",{className:`${D.arrow} ${D.down}`,onClick:N,children:"▼"})]})},K=({date:t,onChange:s,className:N})=>{const r=new Date,n=new Date(r.getFullYear(),r.getMonth()-1,1),o=a=>a>n?n:a,c=a=>{a.preventDefault();const p=Math.sign(a.deltaY),l=new Date(t);l.setDate(1),l.setMonth(l.getMonth()+p),s(o(l))},v=a=>{a.preventDefault();const p=Math.sign(a.deltaY),l=new Date(t);l.setDate(1),l.setFullYear(l.getFullYear()+p),s(o(l))},i=(a,p,l)=>{const g=new Date(a);return g.setDate(1),p&&g.setMonth(g.getMonth()+p),l&&g.setFullYear(g.getFullYear()+l),g},f=t.toLocaleDateString("en-US",{month:"short"}),d=t.getFullYear(),m=i(t,-1,0),u=i(t,1,0),y=m.toLocaleDateString("en-US",{month:"short"}),k=u.toLocaleDateString("en-US",{month:"short"}),U=d-1,P=d+1,S=u<=n,b=i(t,0,1)<=n,M=a=>{s(o(a))},C=a=>{const p=i(t,0,a);s(o(p))};return e(A,{children:e("div",{className:h.popover,children:[e("div",{className:h.column,onWheel:c,title:"Scroll or click to change month",children:[e("span",{className:h.neighbor,onClick:()=>M(m),children:y}),e("span",{className:h.value,children:f}),e("span",{className:h.neighbor,onClick:()=>S&&M(u),style:{visibility:S?"visible":"hidden"},children:k})]}),e("div",{className:h.column,onWheel:v,title:"Scroll or click to change year",children:[e("span",{className:h.neighbor,onClick:()=>C(-1),children:U}),e("span",{className:h.value,children:d}),e("span",{className:h.neighbor,onClick:()=>b&&C(1),style:{visibility:b?"visible":"hidden"},children:P})]})]})})},T=({InitialDeposit:t,MonthlyContribution:s,DateStart:N,setInitialDeposit:r,setMonthlyContribution:n,setDateStart:o,total:c})=>e("div",{className:w.container,children:e("h4",{children:["If you invested"," ",e($,{amount:t,onUp:()=>r(F(t)),onDn:()=>r(x(t)),onChange:r})," ","in"," ",e(K,{date:N,onChange:o,className:w.date}),"and added"," ",e($,{amount:s,onUp:()=>n(F(s)),onDn:()=>n(x(s)),onChange:n})," ","every month this portfolio would have yielded",e("span",{className:`${w.amount} ${w.numberWrapper}`,children:I(c)})]})}),H=({PortfolioID:t,Name:s,Alias:N,ShortDescription:r,Description:n,RiskLevelID:o})=>{const[c,v]=Y(1e6),[i,f]=Y(1e5),[d,m]=Y(new Date(new Date().setFullYear(new Date().getFullYear()-1))),[u,y]=Y(c);return e("div",{className:W.container,children:[e(T,{InitialDeposit:c,MonthlyContribution:i,DateStart:d,setInitialDeposit:v,setMonthlyContribution:f,setDateStart:m,total:u}),e(L,{PortfolioID:t,Name:s,Alias:N,ShortDescription:r,Description:n,RiskLevelID:o,InitialDeposit:c,MonthlyContribution:i,DateStart:d,onBacktestUpdate:k=>y(k)})]})};export{H as Simulator};
