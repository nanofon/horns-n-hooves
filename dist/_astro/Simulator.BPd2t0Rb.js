import{s as g,a as p,b as M,c as K}from"./_alias_.c22ecc25.C9b1J2dJ.js";import{d as v,A as E,y as R}from"./hooks.module.GKk-XFP7.js";import{n as b,d as j,l as V,m as P,P as q}from"./PortfolioCard.Jvuteyxr.js";import{u as t}from"./jsxRuntime.module.UfDXtYJk.js";import{k as z}from"./preact.module.HqusRkxx.js";import"./index.660ff7df.gDPLEu7H.js";const W=({amount:o,onUp:a,onDn:Y,onChange:l})=>{const[s,i]=v(!1),[c,u]=v(b(o)),h=E(null),d=E(null);R(()=>{s||u(b(o))},[o,s]);const D=()=>{i(!0),setTimeout(()=>{h.current&&h.current.focus()},0)},S=()=>{i(!1);let r=j(c);l(r)},f=r=>{r.key==="Enter"&&h.current&&h.current.blur()},N=r=>{u(r.target.value)},w=r=>{d.current=r.touches[0].clientY},y=r=>{if(d.current===null)return;const k=r.changedTouches[0].clientY-d.current;Math.abs(k)>30&&(k<0?a():Y()),d.current=null};return t("div",{className:g.numberWrapper,onTouchStart:w,onTouchEnd:y,children:[t("button",{className:`${g.arrow} ${g.up}`,onClick:a,children:"▲"}),s?t("input",{ref:h,type:"text",className:g.amountInput,value:c,onChange:N,onBlur:S,onKeyDown:f}):t("span",{className:g.amount,onClick:D,style:{cursor:"pointer"},children:b(o)}),t("button",{className:`${g.arrow} ${g.down}`,onClick:Y,children:"▼"})]})},G=({date:o,onChange:a,className:Y})=>{const l=E(null),s=new Date,i=new Date(s.getFullYear(),s.getMonth()-1,1),c=e=>e>i?i:e,u=(e,n,C)=>{const m=new Date(e);return m.setDate(1),n&&m.setMonth(m.getMonth()+n),C&&m.setFullYear(m.getFullYear()+C),m},h=e=>{const n=new Date(o);n.setDate(1),n.setMonth(n.getMonth()+e),a(c(n))},d=e=>{const n=new Date(o);n.setDate(1),n.setFullYear(n.getFullYear()+e),a(c(n))},D=e=>{e.preventDefault();const n=Math.sign(e.deltaY);h(-n)},S=e=>{e.preventDefault();const n=Math.sign(e.deltaY);d(-n)},f=e=>{l.current=e.touches[0].clientY},N=(e,n)=>{if(l.current===null)return;const m=e.changedTouches[0].clientY-l.current;if(Math.abs(m)>30){const U=m<0?-1:1;n==="month"?h(U):d(U)}l.current=null},w=o.toLocaleDateString("en-US",{month:"short"}),y=o.getFullYear(),r=u(o,-1,0),T=u(o,1,0),k=r.toLocaleDateString("en-US",{month:"short"}),B=T.toLocaleDateString("en-US",{month:"short"}),L=y-1,A=y+1,x=T<=i,F=u(o,0,1)<=i,$=e=>{a(c(e))},I=e=>{const n=u(o,0,e);a(c(n))};return t(z,{children:t("div",{className:p.popover,children:[t("div",{className:p.column,onWheel:D,onTouchStart:f,onTouchEnd:e=>N(e,"month"),title:"Scroll or click to change month",children:[t("span",{className:p.neighbor,onClick:()=>x&&$(T),style:{visibility:x?"visible":"hidden"},children:B}),t("span",{className:p.value,children:w}),t("span",{className:p.neighbor,onClick:()=>$(r),children:k})]}),t("div",{className:p.column,onWheel:S,onTouchStart:f,onTouchEnd:e=>N(e,"year"),title:"Scroll or click to change year",children:[t("span",{className:p.neighbor,onClick:()=>F&&I(1),style:{visibility:F?"visible":"hidden"},children:A}),t("span",{className:p.value,children:y}),t("span",{className:p.neighbor,onClick:()=>I(-1),children:L})]})]})})},H=({InitialDeposit:o,MonthlyContribution:a,DateStart:Y,setInitialDeposit:l,setMonthlyContribution:s,setDateStart:i,total:c})=>t("div",{className:M.container,children:t("h4",{children:["If you invested"," ",t(W,{amount:o,onUp:()=>l(P(o)),onDn:()=>l(V(o)),onChange:l})," ","in"," ",t(G,{date:Y,onChange:i,className:M.date}),"and added"," ",t(W,{amount:a,onUp:()=>s(P(a)),onDn:()=>s(V(a)),onChange:s})," ","every month this portfolio would have yielded",t("span",{className:`${M.amount} ${M.numberWrapper}`,children:b(c)})]})}),te=({PortfolioID:o,Name:a,Alias:Y,ShortDescription:l,Description:s,RiskLevelID:i})=>{const[c,u]=v(1e6),[h,d]=v(1e5),[D,S]=v(new Date(new Date().setFullYear(new Date().getFullYear()-1))),[f,N]=v(c);return t("section",{className:K.container,children:[t(H,{InitialDeposit:c,MonthlyContribution:h,DateStart:D,setInitialDeposit:u,setMonthlyContribution:d,setDateStart:S,total:f}),t(q,{PortfolioID:o,Name:a,Alias:Y,ShortDescription:l,Description:s,RiskLevelID:i,InitialDeposit:c,MonthlyContribution:h,DateStart:D,onBacktestUpdate:w=>N(w)})]})};export{te as Simulator};
