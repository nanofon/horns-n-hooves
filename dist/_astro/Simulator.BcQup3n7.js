import{s as p,a as l,b,c as P}from"./_alias_.c22ecc25.CWeHNIgp.js";import{d as S,A as M,y as W}from"./hooks.module.GKk-XFP7.js";import{n as k,d as L,l as I,m as U,P as A}from"./PortfolioCard.eoWPdS2l.js";import{u as e}from"./jsxRuntime.module.UfDXtYJk.js";import{k as K}from"./preact.module.HqusRkxx.js";import"./index.660ff7df.D7Kxh0nH.js";const V=({amount:o,onUp:a,onDn:Y,onChange:s})=>{const[r,i]=S(!1),[c,d]=S(k(o)),h=M(null),m=M(null);W(()=>{r||d(k(o))},[o,r]);const g=()=>{i(!0),setTimeout(()=>{h.current&&h.current.focus()},0)},v=()=>{i(!1);let u=L(c);s(u)},f=u=>{u.key==="Enter"&&h.current&&h.current.blur()},N=u=>{d(u.target.value)},$=u=>{m.current=u.touches[0].clientY},w=u=>{if(m.current===null)return;const y=u.changedTouches[0].clientY-m.current;Math.abs(y)>30&&(y<0?a():Y()),m.current=null};return e("div",{className:p.numberWrapper,onTouchStart:$,onTouchEnd:w,children:[e("button",{className:`${p.controlBtn} ${p.decrease}`,onClick:Y,children:"▼"}),r?e("input",{ref:h,type:"text",className:p.amountInput,value:c,onChange:N,onBlur:v,onKeyDown:f}):e("span",{className:p.amount,onClick:g,style:{cursor:"pointer"},children:k(o)}),e("button",{className:`${p.controlBtn} ${p.increase}`,onClick:a,children:"▲"})]})},R=({date:o,onChange:a,className:Y})=>{const s=M(null),r=new Date,i=new Date(r.getFullYear(),r.getMonth()-1,1),c=t=>t>i?i:t,d=(t,n,C)=>{const D=new Date(t);return D.setDate(1),n&&D.setMonth(D.getMonth()+n),C&&D.setFullYear(D.getFullYear()+C),D},h=t=>{const n=new Date(o);n.setDate(1),n.setMonth(n.getMonth()+t),a(c(n))},m=t=>{const n=new Date(o);n.setDate(1),n.setFullYear(n.getFullYear()+t),a(c(n))},g=t=>{t.preventDefault();const n=Math.sign(t.deltaY);h(-n)},v=t=>{t.preventDefault();const n=Math.sign(t.deltaY);m(-n)},f=t=>{s.current=t.touches[0].clientY},N=(t,n)=>{if(s.current===null)return;const D=t.changedTouches[0].clientY-s.current;if(Math.abs(D)>30){const x=D<0?-1:1;n==="month"?h(x):m(x)}s.current=null},$=o.toLocaleDateString("en-US",{month:"short"}),w=o.getFullYear(),u=d(o,-1,0),T=d(o,1,0);u.toLocaleDateString("en-US",{month:"short"}),T.toLocaleDateString("en-US",{month:"short"});const y=T<=i,E=d(o,0,1)<=i,F=t=>{a(c(t))},B=t=>{const n=d(o,0,t);a(c(n))};return e(K,{children:e("div",{className:l.popover,children:[e("div",{className:l.column,onWheel:g,onTouchStart:f,onTouchEnd:t=>N(t,"month"),title:"Scroll or click to change month",children:[e("button",{className:`${l.controlBtn} ${l.decrease}`,onClick:()=>F(u),children:"▼"}),e("span",{className:l.value,children:$}),e("button",{className:`${l.controlBtn} ${l.increase}`,onClick:()=>y&&F(T),style:{visibility:y?"visible":"hidden"},children:"▲"})]}),e("div",{className:l.column,onWheel:v,onTouchStart:f,onTouchEnd:t=>N(t,"year"),title:"Scroll or click to change year",children:[e("button",{className:`${l.controlBtn} ${l.decrease}`,onClick:()=>B(-1),children:"▼"}),e("span",{className:l.value,children:w}),e("button",{className:`${l.controlBtn} ${l.increase}`,onClick:()=>E&&B(1),style:{visibility:E?"visible":"hidden"},children:"▲"})]})]})})},j=({InitialDeposit:o,MonthlyContribution:a,DateStart:Y,setInitialDeposit:s,setMonthlyContribution:r,setDateStart:i,total:c})=>e("div",{className:b.container,children:e("h4",{children:["You would have ",e("span",{className:`${b.amount} ${b.numberWrapper}`,children:k(c)}),e("br",{}),"if you invested"," ",e(V,{amount:o,onUp:()=>s(U(o)),onDn:()=>s(I(o)),onChange:s})," ","in"," ",e(R,{date:Y,onChange:i,className:b.date}),"and added"," ",e(V,{amount:a,onUp:()=>r(U(a)),onDn:()=>r(I(a)),onChange:r})," ","monthly"]})}),Z=({PortfolioID:o,Name:a,Alias:Y,ShortDescription:s,Description:r,RiskLevelID:i})=>{const[c,d]=S(1e6),[h,m]=S(1e5),[g,v]=S(new Date(new Date().setFullYear(new Date().getFullYear()-1))),[f,N]=S(c);return e("section",{className:P.container,children:[e(j,{InitialDeposit:c,MonthlyContribution:h,DateStart:g,setInitialDeposit:d,setMonthlyContribution:m,setDateStart:v,total:f}),e(A,{PortfolioID:o,Name:a,Alias:Y,ShortDescription:s,Description:r,RiskLevelID:i,InitialDeposit:c,MonthlyContribution:h,DateStart:g,onBacktestUpdate:$=>N($)})]})};export{Z as Simulator};
